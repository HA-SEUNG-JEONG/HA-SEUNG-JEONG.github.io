---
emoji: ğŸ”®
title: ë‹‰ë„¤ì„ ììŒ,ëª¨ìŒ ì²˜ë¦¬ ë° ë‹‰ë„¤ì„ ë³€ê²½í•˜ê¸°
date: '2023-02-01 00:00:00'
author: ì •í•˜ìŠ¹
tags: ë¸”ë¡œê·¸ github-pages gatsby
categories: React
---

ë‹‰ë„¤ì„ ë³€ê²½ ë° ì´ˆì„±ì— ëŒ€í•œ ì—ëŸ¬ ì²˜ë¦¬ë¥¼ ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œ ì‘ì—…ì„ í–ˆë‹¤.

```tsx
const onValid = async ({ nickName }: NickNameProps) => {
  const auth = getAuth(); // ì¸ì¦ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
  if (auth.currentUser) {
    // authì— í˜„ì¬ ìœ ì € ì •ë³´ê°€ ìˆì„ ë•Œ ìƒˆë¡œ ì…ë ¥í•œ ë‹‰ë„¤ì„ì„ displayNameìœ¼ë¡œ ì„¤ì •
    await updateProfile(auth.currentUser, {
      displayName: nickName,
    });
    setNickName(nickName); // ë‹‰ë„¤ì„ ì—…ë°ì´íŠ¸
  }
};
```

ì²˜ìŒì— ëŒ€ì²´ ìœ ì €ì •ë³´ë¥¼ ì–´ë–»ê²Œ ê°€ì ¸ì˜¤ë‚˜ í•˜ë‹¤ê°€ ë‹¤ë¥¸ íŒ€ì›ë¶„ì´ í•´ë†“ìœ¼ì‹ ê±¸ ê·¸ëŒ€ë¡œ ì´ìš©í–ˆë‹¤.

1. getAuthë¥¼ í†µí•´ ì¸ì¦ì •ë³´ë¥¼ ê°€ì ¸ì™”ìœ¼ë©´
2. auth ë‚´ì— ìˆëŠ” currentUserë¥¼ `updateProfile` ë©”ì†Œë“œë¥¼ ì´ìš©í•´ì„œ ë‚´ê°€ ì…ë ¥í•œ ì´ë¦„ ì¦‰, `nickName`ë¡œ ì—…ë°ì´íŠ¸í•œë‹¤.
3. setNickName í•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œë„ ì—…ë°ì´íŠ¸í•œë‹¤.

```tsx
<input
  type="text"
  {...register('nickName', {
    required: true,
    minLength: 2,
    maxLength: 5,
    pattern: /([0-9a-zA-Zê°€-í£\x20])/i, //ì´ˆì„± ë¯¸í¬í•¨
  })}
/>;

{
  errors.nickName?.type === 'pattern' ? <ErrorMessage>ì´ˆì„±ì€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.</ErrorMessage> : null;
}
```

<br />

input íƒœê·¸ì— ìˆëŠ” `pattern`ê³¼ `errors.nickName?.type`ì´ `pattern`ì¸ì§€ `maxLength` ì¸ì§€ ë“±ë“±ì„ í™•ì¸ì‹œì¼œì£¼ëŠ” ì¥ì¹˜ê°€ ë”°ë¡œ ë§ˆë ¨ë˜ì–´ìˆë‹¤.

`errors.nickName?.type`ì´ ì–´ë–¤ ValidatioRule(ë¬¸ì„œì— ì´ë ‡ê²Œ ë‚˜ì™€ìˆë‹¤.)ì¸ì§€(maxLength,minLength,pattern ë“±ë“±) í™•ì¸ì„ ì‹œì¼œì£¼ê¸° ë•Œë¬¸ì— ìë™ì™„ì„±ë„ ë˜ê³  í¸ë¦¬í•˜ë‹¤.

ê·¸ë¦¬ê³  ììŒ,ëª¨ìŒì— ëŒ€í•œ ì²˜ë¦¬ë„ ì¡°ê¸ˆ ì• ë¥¼ ë¨¹ì—ˆëŠ”ë° ì •ê·œì‹ í…ŒìŠ¤íŠ¸ ì‚¬ì´íŠ¸ì—ì„œ ì§ì ‘ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ë‹ˆê¹Œ ìµìˆ™í•´ì§€ëŠ” ê±° ê°™ë‹¤.

`/([0-9a-zA-Zê°€-í£\x20])/i`ëŠ” ììŒê³¼ ëª¨ìŒë§Œ ìˆëŠ” ê²½ìš°ì— ì •ê·œì‹ í…ŒìŠ¤íŠ¸ê°€ í†µê³¼ê°€ ì•ˆë˜ë„ë¡ í•˜ëŠ” ë°©ì‹ì´ë‹¤.

ì°¸ê³ ë¡œ ` /([^ê°€-í£ã„±-ã…ã…-ã…£\x20])/i`ëŠ” ììŒ,ëª¨ìŒë§Œ ìˆì–´ë„ í†µê³¼ê°€ ê°€ëŠ¥í•˜ë‹¤.

```tsx
const Profile = () => {
  const [isOpen, setIsOpen] = useRecoilState(profileImage);
  const userObj = sessionUserData();
  const [nickName, setNickName] = useState(userObj.displayName);

  const {
    register,
    handleSubmit,
    formState: { errors },
    setValue,
  } = useForm<NickNameProps>({ mode: 'onChange' }); // mode: 'onChange' => ì‚¬ìš©ìì—ê²Œ ì‹¤ì‹œê°„ìœ¼ë¡œ í”¼ë“œë°± ì œê³µ
};
```

useFormì—ì„œì˜ `mode`ë¥¼ `onChange`ë¡œ í•˜ë©´ ì‚¬ìš©ìì—ê²Œ ì‹¤ì‹œê°„ìœ¼ë¡œ í”¼ë“œë°±ì„ ì¤„ ìˆ˜ ìˆì–´ì„œ ì‘ì€ ê·œëª¨ì—ì„œëŠ” ìƒê´€ì—†ì§€ë§Œ, í”„ë¡œì íŠ¸ ê·œëª¨ê°€ ì»¤ì§ˆ ê²½ìš° ë¦¬ë Œë”ë§ì´ ì¼ì–´ë‚  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì„±ëŠ¥ì— ì•ˆ ì¢‹ì€ ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆë‹¤.

### References

https://react-hook-form.com/api/useform/#mode
