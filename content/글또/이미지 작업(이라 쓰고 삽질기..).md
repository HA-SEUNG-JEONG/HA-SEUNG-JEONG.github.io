---
emoji: ğŸ”®
title: ì´ë¯¸ì§€ ì‘ì—…(ì´ë¼ ì“°ê³  ì‚½ì§ˆê¸°..)
date: '2023-03-09 00:00:00'
author: ì •í•˜ìŠ¹
tags: ë¸”ë¡œê·¸ github-pages gatsby
categories: ê¸€ë˜
---

<img src='../../assets/profilechange.png' />

<br />

ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ ë””ìì¸ì„ ì°¸ê³ í•˜ë©´ì„œ ì‹¤ì œë¡œ êµ¬í˜„í•´ë³´ê³  ì‹¶ì—ˆëŠ”ë° ë©°ì¹ ì„ í—¤ë§¸ë˜ ê±° ê°™ë‹¤...ã…‹ã…‹ã…‹

ì‚¬ê°í˜• ë¶€ë¶„ì€ ë’· ë°°ê²½ë§Œ opacity ê°’ì„ ë‹¤ë¥´ê²Œ ì£¼ë©´ ë˜ëŠ”ê±°ì˜€ëŠ”ë° CSSê°€ ê³„ì† ë°œëª©ì„ ì¡ì•˜ë‹¤.

```tsx
// ì´ë¯¸ì§€ ì—…ë¡œë“œ ë° ì‚­ì œì— ëŒ€í•œ ëª¨ë‹¬

const ProfileImageModal = ({ closeEvent }: CloseProps) => {
  const storage = getStorage();
  const [imgName, setImgName] = useState('');

  const [imgUpload, setImgUpload] = useState<FileTypes | null>(null);
  const [imgUrl, setImgUrl] = useRecoilState(ImgUrlArrState);

  // ì—…ë¡œë“œ
  const uploadImageToStorage = () => {
    if (imgUpload === null) return;

    const id = Date.now() / imgUpload.name.length;
    const imageRef = ref(storage, `images/${imgUpload.name}_${id}`);

    uploadBytes(imageRef, imgUpload as File).then((snapshot) => {
      getDownloadURL(snapshot.ref).then((url) => {
        setImgUrl((prev) => [...prev, { url, id: `images/${imgUpload.name}_${id}` }]);
        setImgUpload(null);
      });
    });
  };

  // ì´ë¯¸ì§€ ì‚­ì œ
  const handleDeleteButtonClick = (event: React.MouseEvent<HTMLElement>) => {
    event.preventDefault();
    if (confirm('ì‚¬ì§„ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
      handleDelete(event);
      setImgUpload(null);
      setImgName('');
    }
  };

  const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {
    event.preventDefault();
    if (!imgUpload) return;
    uploadImageToStorage();
  };

  const handleDelete = (event: React.MouseEvent<HTMLElement>) => {
    const deleteRef = ref(storage, event.currentTarget.id);
    deleteObject(deleteRef);
    setImgUrl(imgUrl.filter((obj) => obj.id !== event.currentTarget.id));
  };

  useEffect(() => {
    if (imgUpload !== null) uploadImageToStorage();
  }, [setImgUrl]);

  return (
    <>
      <Modal>
        <PreviewContainer imgUrl={imgUrl} />
        <Form onSubmit={handleSubmit}>
          <ImageUploader imgName={imgName} setImgUpload={setImgUpload} setImgName={setImgName} />
          <ButtonContainer>
            <Button onClick={handleDeleteButtonClick} id={imgUrl[0]?.id}>
              ì‚­ì œ
            </Button>
            <Button type="submit">ì €ì¥</Button>
          </ButtonContainer>
        </Form>
      </Modal>
      <BackgroundBlur />
    </>
  );
};

// ì´ë¯¸ì§€ë¥¼ ì˜¬ë ¸ì„ ë•Œ í”„ë¦¬ë·° ë³´ì—¬ì£¼ê¸°

const ProfileWrap = styled.div`
  width: 8rem;
  height: 8rem;
  margin: 0 auto;
  position: relative;
`;

const PreviewOuterImage = styled.div<{ url?: string }>`
  width: 7.9rem;
  height: 7.9rem;
  background-image: url(${(props) => props.url});
  background-size: cover;
  background-position: center;
  position: absolute;
  border-radius: 4rem;
  border: 1px solid black;
`;

const PreviewImgPositionWrap = styled.div<{ url: string }>`
  &::before {
    content: '';
    background-image: url(${(props) => props.url});
    background-size: cover;
    opacity: 0.5;
    position: absolute;
    inset: 0;
  }
`;

const PreviewContainer = ({ imgUrl }: ImgUrlProps) => {
  return (
    <ProfileWrap>
      {imgUrl.map((item) => {
        return (
          <PreviewImgPositionWrap key={item.url} url={item.url}>
            <PreviewOuterImage url={item.url} />
          </PreviewImgPositionWrap>
        );
      })}
    </ProfileWrap>
  );
};
```

<img src='../../assets/profilechangeGIF.gif' />

<br />

êµ¬ê¸€ë§ì„ ì—´ì‹¬íˆ í•´ ë³¸ ê²°ê³¼, ì½”ë“œì—ì„œì²˜ëŸ¼ `PreviewImgPositionWrap` ì— before selectorë¥¼ ì”Œì›Œì£¼ë‹ˆ ë””ìì¸ì²˜ëŸ¼ êµ¬í˜„ëœ ê±° ê°™ê¸°ëŠ” í•œë°,

CSS êµ¬í˜„ë‹¨ì—ì„œ ì •ë§ `<{ url: string }>`ì´ ë‘ë²ˆì”©ì´ë‚˜ ì ì„ í•„ìš”ê°€ ìˆëŠ”ì§€ëŠ” ë” ì—°êµ¬í•´ë´ì•¼ í•  ê²ƒ ê°™ë‹¤.

ì‚¬ì§„ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ë©´ì„œ íŒŒì´ì–´ë² ì´ìŠ¤ì— ë„ˆë¬´ ìš”ì²­ì„ ë³´ë‚¸ íƒ“ì¸ì§€ í• ë‹¹ëŸ‰ì„ ì´ˆê³¼í•´ë²„ë ¸ë‹¤...

<img src='../../assets/KakaoTalk_20230309_002720448.jpg' />

<br />

ë‹¤ìŒë‚ ì— ì´ê±°ë‘ ê°™ì´ ê³¨ë¨¸ë¦¬ë¥¼ ì•“ë˜ ì‚¬ì§„ ì‚­ì œ ê¸°ëŠ¥ë„ íŒ€ì› ë•ë¶„ì— êµ¬í˜„ëë‹¤.

ê·¸ëŸ°ë° ì´ ê¸€ì„ ì“°ê¸° ë©°ì¹ ì „ì—ëŠ” ë”°ë¡œ ë²„ê·¸ê°€ ì—†ì—ˆëŠ”ë°,

ì‚¬ì§„ ì €ì¥ í›„ì— ì‚­ì œë¥¼ í•˜ë©´ íŒŒì´ì–´ë² ì´ìŠ¤ ìŠ¤í† ë¦¬ì§€ì— ìˆëŠ” ê²ƒê³¼ í•¨ê»˜ í”„ë¦¬ë·°ë„ ì‚­ì œí•˜ê³  ì‹¶ì—ˆëŠ”ë°...

íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì“°ë©´ì„œ ê·¸ëŸ°ê±´ì§€, ì €ì¥ ë²„íŠ¼ í´ë¦­ í›„ì— ì‚­ì œ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ í”„ë¦¬ë·°ê°€ ì‚­ì œê°€ ì•ˆë˜ê³  ìˆì–´ì„œ ì–´ë””ì„œ ì˜ëª»ëœê±´ì§€ ë´ì•¼í•  ê±° ê°™ë‹¤..

<img src='../../assets/profilechangeGIF2.gif' />

<br />
